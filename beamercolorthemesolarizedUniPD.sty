% Beamer Color Theme using the Solarized Palette,
% http://ethanschoonover.com/solarized.
%
% Copyright 2012 Jeffrey B. Arnold
% 
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.

\ProvidesPackage{beamercolorthemesolarizedUniPD}[2013/10/11 1.0.1 UniPD Solarized color theme for beamer]
\RequirePackage{etoolbox}
\RequirePackage{kvoptions}
\RequirePackage{graphicx}

%% This is ugly. First time using options and conditionals in LaTeX
\SetupKeyvalOptions{
  family=solarized,
  prefix=solarized@,
}
\DeclareBoolOption[false]{dark}
\DeclareComplementaryOption{light}{dark}
\DeclareStringOption[yellow]{accent}[yellow]
\ProcessKeyvalOptions*

% Solarized palette
\definecolor{solarizedBase03}{HTML}{212121}
\definecolor{solarizedBase02}{HTML}{000000}
\definecolor{solarizedBase01}{HTML}{BDBDBD}
\definecolor{solarizedBase00}{HTML}{424242}
\definecolor{solarizedBase0}{HTML}{FFFFFF}
\definecolor{solarizedBase1}{HTML}{FFFFFF}
\definecolor{solarizedBase2}{HTML}{EEE8D5}
\definecolor{solarizedBase3}{HTML}{FDF6E3}
\definecolor{solarizedYellow}{HTML}{B58900}
\definecolor{solarizedOrange}{HTML}{CB4B16}
\definecolor{solarizedRed}{HTML}{DC322F}
\definecolor{solarizedMagenta}{HTML}{D33682}
\definecolor{solarizedViolet}{HTML}{6C71C4}
\definecolor{solarizedBlue}{HTML}{268BD2}
\definecolor{solarizedCyan}{HTML}{2AA198}
\definecolor{solarizedGreen}{HTML}{859900}

% Set Accent color
% Ugly. Should be done with a switch
\ifdefstring{\solarized@accent}{yellow}{
  \colorlet{solarizedAccent}{solarizedYellow}
}{}
\ifdefstring{\solarized@accent}{orange}{
  \colorlet{solarizedAccent}{solarizedOrange}
}{}
\ifdefstring{\solarized@accent}{red}{
  \colorlet{solarizedAccent}{solarizedRed}
}{}
\ifdefstring{\solarized@accent}{magenta}{
  \colorlet{solarizedAccent}{solarizedMagenta}
}{}
\ifdefstring{\solarized@accent}{violet}{
  \colorlet{solarizedAccent}{solarizedViolet}
}{}
\ifdefstring{\solarized@accent}{blue}{
  \colorlet{solarizedAccent}{solarizedBlue}
}{}
\ifdefstring{\solarized@accent}{cyan}{
  \colorlet{solarizedAccent}{solarizedCyan}
}{}
\ifdefstring{\solarized@accent}{green}{
  \colorlet{solarizedAccent}{solarizedGreen}
}{}

%% Set base colors for dark or light versions
%% Dark
% Switch between light and dark themes using the method in the CSS
% stylesheet http://ethanschoonover.com/solarized
\ifboolexpe{ bool {solarized@dark}}{
  \colorlet{solarizedRebase03}{solarizedBase03}
  \colorlet{solarizedRebase02}{solarizedBase02}
  \colorlet{solarizedRebase01}{solarizedBase01}
  \colorlet{solarizedRebase00}{solarizedBase00}
  \colorlet{solarizedRebase0}{solarizedBase0}
  \colorlet{solarizedRebase1}{solarizedBase1}
  \colorlet{solarizedRebase2}{solarizedBase2}
  \colorlet{solarizedRebase3}{solarizedBase3}
}{
  %% Light
  \colorlet{solarizedRebase03}{solarizedBase3}
  \colorlet{solarizedRebase02}{solarizedBase2}
  \colorlet{solarizedRebase01}{solarizedBase1}
  \colorlet{solarizedRebase00}{solarizedBase0}
  \colorlet{solarizedRebase0}{solarizedBase00}
  \colorlet{solarizedRebase1}{solarizedBase01}
  \colorlet{solarizedRebase2}{solarizedBase02}
  \colorlet{solarizedRebase3}{solarizedBase03}
}

\mode<presentation>

\setbeamercolor{normal text}{fg=solarizedRebase0, bg=solarizedRebase03}
\setbeamercolor{alerted text}{fg=solarizedAccent}
% based css pre element 
\setbeamercolor{example text}{fg=solarizedRebase1, bg=solarizedRebase02}

% Header and footer from CSS 
\setbeamercolor{footline}{bg=solarizedRebase02,fg=solarizedRebase01}
\setbeamercolor{headline}{bg=solarizedRebase01,fg=solarizedRebase1}

% Titles
\setbeamercolor*{titlelike}{fg=solarizedAccent}
\setbeamercolor*{frametitle}{fg=solarizedAccent}
\setbeamercolor*{title}{fg=solarizedAccent}

% Structure elements use css style for header 
\setbeamercolor*{structure}{bg=solarizedRebase01, fg=solarizedRebase1}

% Do not mess with subtle colors in palette. I don't like it. 
\setbeamercolor*{palette primary}{bg=solarizedRebase01, fg=solarizedRebase1}
\setbeamercolor*{palette secondary}{bg=solarizedRebase01, fg=solarizedRebase1}
\setbeamercolor*{palette tertiary}{bg=solarizedRebase01, fg=solarizedRebase1}
\setbeamercolor*{palette quaternary}{bg=solarizedRebase01, fg=solarizedRebase1}

% Make Blocks slightly lighter/darker
\setbeamercolor{block title}{fg=solarizedAccent, bg=solarizedRebase02}
%\setbeamercolor{block title alerted}{}
%\setbeamercolor{block title example}{}

\setbeamercolor{block body}{parent=normal text, bg=solarizedRebase02}
% \setbeamercolor{block body alerted}{}
% \setbeamercolor{block body example}{}

% same as footline
% Set Sidebar and footline to use the css style for footer
\setbeamercolor*{sidebar}{parent=headline}
\setbeamercolor*{palette sidebar primary}{fg=solarizedRebase01, fg=solarizedRebase1}
\setbeamercolor*{palette sidebar secondary}{fg=solarizedRebase01, fg=solarizedRebase1}
\setbeamercolor*{palette sidebar tertiary}{fg=solarizedRebase01, fg=solarizedRebase1}
\setbeamercolor*{palette sidebar quaternary}{fg=solarizedRebase01, fg=solarizedRebase1}

% border-color for headings
\setbeamercolor{separation line}{fg=solarizedRebase0}
\setbeamercolor{fine separation line}{fg=solarizedRebase0}

\setbeamercolor*{section in sidebar shaded}{parent=palette sidebar primary}
% a.hover.navlink in CSS
\setbeamercolor*{section in sidebar}{parent=palette sidebar primary, fg=solarizedRebase02}
\setbeamercolor*{subsection in sidebar}{parent=section in sidebar}
\setbeamercolor*{subsection in sidebar shaded}{parent=section in sidebar shaded}

%%%

\newcommand\titlepic{beamercolorthemesolarized/unipd/unipd-logo}

\setbeamertemplate{itemize item}[default]
\setbeamertemplate{itemize subitem}[circle]

% disable navigation symbols 
\setbeamertemplate{navigation symbols}{}

\setbeamertemplate{frametitle}
{
    \ifbeamer@plainframe
    \else
    \vspace{-.25cm}
    \textbf{\LARGE{\insertframetitle}}
    \begin{textblock*}{1cm}(9.7cm, 0.4cm)
       %\rule{2cm}{7.40cm}
       \includegraphics[scale=0.45]{beamercolorthemesolarized/unipd/unipd-logo}
    \end{textblock*}
    \vspace{.50cm}
    \fi
}

% headline
\setbeamertemplate{headline}{
    \ifbeamer@plainframe
    \else
    \vspace{8mm}
    \leavevmode\tiny%
    \hspace*{9.15cm}
    \normalsize
    \fi
}

% title page
\setbeamertemplate{title page}{
    \begin{center}
    \textbf{\LARGE{\inserttitle}}
    \vspace{0.5cm}
    \textit{\insertsubtitle}
    \end{center}
    \vfill
    \begin{columns}
        \begin{column}{.45\textwidth}
            \normalsize{\insertauthor}\\
            \scriptsize
            \vspace*{0.2cm}
            \insertshortinstitute
            \vspace*{0.2cm}
            \insertshortdate
        \end{column}
        \begin{column}{.45\textwidth}
            \hfill\includegraphics[scale=0.8,keepaspectratio]{beamercolorthemesolarized/unipd/unipd-logo}
        \end{column}
    \end{columns}
    \normalsize
    \setbeamertemplate{footline}{}
}

% footer with name, date and page numbers
\setbeamertemplate{footline}{
    \ifbeamer@plainframe
    \else
    \leavevmode\tiny%
    \hspace*{1.0cm}%
    \makebox[2.2cm][l]{\insertdate}%
    \makebox[1.8cm][l]{\insertauthor}%
    \makebox[0.5cm][l]{\inserttitle}%
    \hfill
    \ifx\insertsection\empty
    \else
    \insertsection
    \fi
    \ifx\insertsubsection\empty
    \else
    :\insertsubsection
    \fi
    \ifx\insertsubsubsection\empty
    \else
    :\insertsubsubsection
    \fi
    \ifx\turnOffNumbers\empty
    \hfill\insertframenumber/\inserttotalframenumber\hspace{5mm}%
    \else
    \fi
    \vspace{3mm}%
    \fi
}

\def\makethanks{%
    \begin{frame}[plain, noframenumbering]
        
        % UniPD
        \begin{textblock*}{1cm}(0cm,-7.5cm)
            \rule{2cm}{7.5cm}
            %\includegraphics[scale=0.75]{beamercolorthemesolarized/unipd/unipd-logo}
        \end{textblock*}
        
        \vspace{1cm}
        \begin{center}
            {\fontsize{20pt}{15pt}\selectfont
                Thank you for your attention. \\
                \vspace{2cm}
                Questions?
            }
        \end{center}
        % Dipartimento di matematica
        \begin{textblock*}{1cm}(9.9cm,7.6cm)
            %\rule{2cm}{7.5cm}
            \includegraphics[scale=0.2]{beamercolorthemesolarized/unipd/math_unipd}
        \end{textblock*}
    \end{frame}
}


%%%

\mode
<all>
